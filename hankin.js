// Generated by CoffeeScript 1.11.1
var Hankin;

Hankin = (function() {
  function Hankin(a, v) {
    this.a = a;
    this.v = v;
    this.b = p5.Vector.add(this.a, this.v);
    this.end = null;
    this.prevD = null;
  }

  Hankin.prototype.show = function() {
    stroke(255, 0, 255);
    return line(this.a.x, this.a.y, this.end.x, this.end.y);
  };

  Hankin.prototype.findEnd = function(other) {
    var candidate, d, d1, d2, den, diff, numa, numb, ua, ub, x, y;
    den = other.v.y * this.v.x - other.v.x * this.v.y;
    if (!den) {
      return;
    }
    numa = other.v.x * (this.a.y - other.a.y) - other.v.y * (this.a.x - other.a.x);
    numb = this.v.x * (this.a.y - other.a.y) - this.v.y * (this.a.x - other.a.x);
    ua = numa / den;
    ub = numb / den;
    x = this.a.x + ua * this.v.x;
    y = this.a.y + ua * this.v.y;
    if (ua > 0 && ub > 0) {
      candidate = createVector(x, y);
      d1 = p5.Vector.dist(candidate, this.a);
      d2 = p5.Vector.dist(candidate, other.a);
      d = d1 + d2;
      diff = abs(d1 - d2);
      if (diff < 0.001) {
        if (!this.end) {
          this.end = candidate;
          return this.prevD = d;
        } else if (d < this.prevD) {
          this.prevD = d;
          return this.end = candidate;
        }
      }
    }
  };

  return Hankin;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGFua2luLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaGFua2luLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQTs7QUFBTTtFQUNVLGdCQUFDLENBQUQsRUFBSyxDQUFMO0lBQUMsSUFBQyxDQUFBLElBQUQ7SUFBSSxJQUFDLENBQUEsSUFBRDtJQUNqQixJQUFDLENBQUEsQ0FBRCxHQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBVixDQUFjLElBQUMsQ0FBQSxDQUFmLEVBQWtCLElBQUMsQ0FBQSxDQUFuQjtJQUNMLElBQUMsQ0FBQSxHQUFELEdBQU87SUFDUCxJQUFDLENBQUEsS0FBRCxHQUFTO0VBSEc7O21CQUtkLElBQUEsR0FBTyxTQUFBO0lBQ0wsTUFBQSxDQUFPLEdBQVAsRUFBWSxDQUFaLEVBQWUsR0FBZjtXQUNBLElBQUEsQ0FBSyxJQUFDLENBQUEsQ0FBQyxDQUFDLENBQVIsRUFBVyxJQUFDLENBQUEsQ0FBQyxDQUFDLENBQWQsRUFBaUIsSUFBQyxDQUFBLEdBQUcsQ0FBQyxDQUF0QixFQUF5QixJQUFDLENBQUEsR0FBRyxDQUFDLENBQTlCO0VBRks7O21CQUlQLE9BQUEsR0FBVSxTQUFDLEtBQUQ7QUFDUixRQUFBO0lBQUEsR0FBQSxHQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBUixHQUFZLElBQUMsQ0FBQSxDQUFDLENBQUMsQ0FBZixHQUFtQixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQVIsR0FBWSxJQUFDLENBQUEsQ0FBQyxDQUFDO0lBQ3pDLElBQUcsQ0FBQyxHQUFKO0FBQ0UsYUFERjs7SUFFQSxJQUFBLEdBQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFSLEdBQVksQ0FBQyxJQUFDLENBQUEsQ0FBQyxDQUFDLENBQUgsR0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQWhCLENBQVosR0FBaUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFSLEdBQVksQ0FBQyxJQUFDLENBQUEsQ0FBQyxDQUFDLENBQUgsR0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQWhCO0lBQ3BELElBQUEsR0FBTyxJQUFDLENBQUEsQ0FBQyxDQUFDLENBQUgsR0FBTyxDQUFDLElBQUMsQ0FBQSxDQUFDLENBQUMsQ0FBSCxHQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBaEIsQ0FBUCxHQUE0QixJQUFDLENBQUEsQ0FBQyxDQUFDLENBQUgsR0FBTyxDQUFDLElBQUMsQ0FBQSxDQUFDLENBQUMsQ0FBSCxHQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBaEI7SUFDMUMsRUFBQSxHQUFLLElBQUEsR0FBTztJQUNaLEVBQUEsR0FBSyxJQUFBLEdBQU87SUFDWixDQUFBLEdBQUksSUFBQyxDQUFBLENBQUMsQ0FBQyxDQUFILEdBQU8sRUFBQSxHQUFLLElBQUMsQ0FBQSxDQUFDLENBQUM7SUFDbkIsQ0FBQSxHQUFJLElBQUMsQ0FBQSxDQUFDLENBQUMsQ0FBSCxHQUFPLEVBQUEsR0FBSyxJQUFDLENBQUEsQ0FBQyxDQUFDO0lBRW5CLElBQUcsRUFBQSxHQUFLLENBQUwsSUFBVyxFQUFBLEdBQUssQ0FBbkI7TUFDRSxTQUFBLEdBQVksWUFBQSxDQUFhLENBQWIsRUFBZ0IsQ0FBaEI7TUFDWixFQUFBLEdBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFWLENBQWUsU0FBZixFQUEwQixJQUFDLENBQUEsQ0FBM0I7TUFDTCxFQUFBLEdBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFWLENBQWUsU0FBZixFQUEwQixLQUFLLENBQUMsQ0FBaEM7TUFDTCxDQUFBLEdBQUksRUFBQSxHQUFLO01BQ1QsSUFBQSxHQUFPLEdBQUEsQ0FBSSxFQUFBLEdBQUssRUFBVDtNQUNQLElBQUcsSUFBQSxHQUFPLEtBQVY7UUFDRSxJQUFHLENBQUMsSUFBQyxDQUFBLEdBQUw7VUFDRSxJQUFDLENBQUEsR0FBRCxHQUFPO2lCQUNQLElBQUMsQ0FBQSxLQUFELEdBQVMsRUFGWDtTQUFBLE1BR0ssSUFBRyxDQUFBLEdBQUksSUFBQyxDQUFBLEtBQVI7VUFDSCxJQUFDLENBQUEsS0FBRCxHQUFTO2lCQUNULElBQUMsQ0FBQSxHQUFELEdBQU8sVUFGSjtTQUpQO09BTkY7O0VBWFEiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBIYW5raW5cclxuICBjb25zdHJ1Y3RvciA6IChAYSwgQHYpIC0+XHJcbiAgICBAYiA9IHA1LlZlY3Rvci5hZGQgQGEsIEB2XHJcbiAgICBAZW5kID0gbnVsbFxyXG4gICAgQHByZXZEID0gbnVsbFxyXG5cclxuICBzaG93IDogLT5cclxuICAgIHN0cm9rZSAyNTUsIDAsIDI1NVxyXG4gICAgbGluZSBAYS54LCBAYS55LCBAZW5kLngsIEBlbmQueVxyXG5cclxuICBmaW5kRW5kIDogKG90aGVyKSAtPlxyXG4gICAgZGVuID0gIG90aGVyLnYueSAqIEB2LnggLSBvdGhlci52LnggKiBAdi55XHJcbiAgICBpZiAhZGVuXHJcbiAgICAgIHJldHVyblxyXG4gICAgbnVtYSA9IG90aGVyLnYueCAqIChAYS55IC0gb3RoZXIuYS55KSAtIG90aGVyLnYueSAqIChAYS54IC0gb3RoZXIuYS54KVxyXG4gICAgbnVtYiA9IEB2LnggKiAoQGEueSAtIG90aGVyLmEueSkgLSBAdi55ICogKEBhLnggLSBvdGhlci5hLngpXHJcbiAgICB1YSA9IG51bWEgLyBkZW5cclxuICAgIHViID0gbnVtYiAvIGRlblxyXG4gICAgeCA9IEBhLnggKyB1YSAqIEB2LnhcclxuICAgIHkgPSBAYS55ICsgdWEgKiBAdi55XHJcblxyXG4gICAgaWYgdWEgPiAwIGFuZCB1YiA+IDBcclxuICAgICAgY2FuZGlkYXRlID0gY3JlYXRlVmVjdG9yIHgsIHlcclxuICAgICAgZDEgPSBwNS5WZWN0b3IuZGlzdCBjYW5kaWRhdGUsIEBhXHJcbiAgICAgIGQyID0gcDUuVmVjdG9yLmRpc3QgY2FuZGlkYXRlLCBvdGhlci5hXHJcbiAgICAgIGQgPSBkMSArIGQyXHJcbiAgICAgIGRpZmYgPSBhYnMgZDEgLSBkMlxyXG4gICAgICBpZiBkaWZmIDwgMC4wMDFcclxuICAgICAgICBpZiAhQGVuZCBcclxuICAgICAgICAgIEBlbmQgPSBjYW5kaWRhdGVcclxuICAgICAgICAgIEBwcmV2RCA9IGRcclxuICAgICAgICBlbHNlIGlmIGQgPCBAcHJldkRcclxuICAgICAgICAgIEBwcmV2RCA9IGRcclxuICAgICAgICAgIEBlbmQgPSBjYW5kaWRhdGUiXX0=
//# sourceURL=C:\github\StarPatterns\hankin.coffee